# 6. Servlet - forward
> Redirect `sendRedirect()` / Dispatch `RequestDispatcher dis = request.gerRequestDisPatcher()`

<br><br>

- âœğŸ»Â **Recorded Date**Â : 2022ë…„ 12ì›” 12ì¼
- [ë…¸ì…˜ì—ì„œ ë³´ê¸°](https://6suk.notion.site/6-Servlet-foward-5734cc67cda44bab80b44fe74e7d8d1a?pvs=4)

<br><br>

## ğŸ”¸ í¬ì›Œë“œ(forward)ë€?

- í•˜ë‚˜ì˜ ì„œë¸”ë¦¿ì„ ë‹¤ë¥¸ ì„œë¸”ë¦¿ì´ë‚˜ JSPì™€ ì—°ë™í•˜ëŠ” ë°©ë²•
- ìš”ì²­ì— ëŒ€í•œ ì¶”ê°€ ì‘ì—…ì„ ë‹¤ë¥¸ ì„œë¸”ë¦¿ì´ ìˆ˜í–‰
- ìš”ì²­ì— í¬í•¨ëœ ì •ë³´ë¥¼ ë‹¤ë¥¸ ì„œë¸”ë¦¿ì´ë‚˜ JSPì™€ ê³µìœ í•œë‹¤.
- ìš”ì²­ì— ì •ë³´ë¥¼ ë§ë¶™ì—¬ ë‹¤ë¥¸ ì„œë¸”ë¦¿ìœ¼ë¡œ ì „ë‹¬í•œë‹¤.
- ëª¨ë¸ 2 ê°œë°œ ì‹œ ì„œë¸”ë¦¿ì—ì„œ JSP ë¡œ ì •ë³´ë¥¼ ì „ë‹¬í•œë‹¤.

<br><br>

### â—½ â­ Redirect

- ì„œë¸”ë¦¿ì˜ ìš”ì²­ì´ í´ë¼ì´ì–¸íŠ¸ì˜ ë¸Œë¼ìš°ì €ë¥¼ ê±°ë“­ ê±°ì³ ìš”ì²­ë˜ëŠ” ë°©ì‹

<img src = "./img/0603_03.png"><br>

1. ì²«ë²ˆì§¸ ì„œë¸”ë¦¿ì´ ìš”ì²­ì„ ë°›ê³ ,
2. sendRedirect() ë©”ì„œë“œë¥¼ ì´ìš©í•´ ë¸Œë¼ìš°ì €ì—ê²Œ ë‘ ë²ˆì§¸ ì„œë¸Œë¦¿ìœ¼ë¡œ ì¬ìš”ì²­í•˜ë„ë¡ í•˜ë©´,
3. ë¸Œë¼ìš°ì €ëŠ” sendRedirect() ë©”ì„œë“œì—ì„œ ì§€ì •ëœ ë‘ ë²ˆì§¸ ì„œë¸”ë¦¿ìœ¼ë¡œ ë…ë¦½ì €ì¸ ìš”ì²­ì„ ë³´ë‚¸ë‹¤.

```java
sendRedirect("í¬ì›Œë“œí•  ì„œë¸”ë¦¿ ë˜ëŠ” JSP")
```

<br>
<br>

### â—½ Refresh

- redirect ë°©ì‹ê³¼ ë™ì¼í•˜ê²Œ ì‘ìš©
- ìš”ì²­ì„ ë°›ì€ ì²« ë²ˆì§¸ ì„œë¸”ë¦¿ì´ ë‘ë²ˆì§¸ ì„œë¸”ë¦¿ìœ¼ë¡œ ì „ë‹¬í•˜ê¸° ìœ„í•´ì„œëŠ” ë¸Œë¼ìš°ì € ì¸¡ì—ì„œ ë‘ë²ˆì§¸ ì„œë¸”ë¦¿ìœ¼ë¡œ ìƒˆë¡œìš´ ìš”ì²­ì„ ë³´ë‚´ì•¼í•œë‹¤.
- `redirect` ë°©ì‹ê³¼ ì°¨ì´ì 
    - addHeader() ë©”ì„œë“œë¥¼ ì´ìš©í•œë‹¤.
    - ë§¤ê°œ ë³€ìˆ˜ë¡œ ë‘ë²ˆì§¸ ì„œë¸”ë¦¿ ì™¸ì—ë„ ì¬ìš”ì²­ì´ ì´ë¤„ì§€ëŠ”ë° ê±¸ë¦¬ëŠ” ì§€ì—° ì‹œê°„ì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.
        
        ```java
        response.addHeader("Refresh","ê²½ê³¼ì‹œê°„(ì´ˆ); url = ìš”ì²­í•  ì„œë¸”ë¦¿ì´ë‚˜ JSP")
        ```
        

<br>
<br>


### â—½ Location

- ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì œê³µë˜ëŠ” location ê°ì²´ë¥¼ ì´ìš©í•´ í¬ì›Œë“œí•˜ëŠ” ë°©ë²•
- ìœ„ ë‘˜ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ í´ë¼ì´ì–¸íŠ¸ë¥¼ ê±°ì³ ë‹¤ìŒ ì„œë¸”ë¦¿ìœ¼ë¡œ ë…ë¦½ì ìœ¼ë¡œ ìš”ì²­ì„ ë³´ë‚´ì–´ ë™ì‘í•˜ëŠ” ë°©ì‹
    
    ```java
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
    			throws ServletException, IOException {
    		response.setContentType("text/html;charset=utf-8");
    		PrintWriter out = response.getWriter();
    		out.print("<script type='text/javascript'>");
    		out.print("location.href='second';");
    		out.print("</script>");
    	}
    ```
    

<br>
<br>


### â—½ â­ Dispatch

- ì¼ë°˜ì ìœ¼ë¡œ í¬ì›Œë”© ê¸°ëŠ¥ì„ ì§€ì¹­
- dispatchë¥¼ ì´ìš©í•œ í¬ì›Œë“œ ë°©ì‹ì€ ë‚˜ë¨¸ì§€ ì„¸ ê°€ì§€ ë°©ì‹ê³¼ ë‹¤ë¥´ë‹¤.
- í´ë¼ì´ì–¸íŠ¸ë¥¼ ê±°ì¹˜ì§€ ì•Šê³  ì²«ë²ˆì§¸ ì„œë¸”ë¦¿ê³¼ ë‘ë²ˆì§¸ ì„œë¸”ë¦¿ ì‚¬ì´ì—ì„œ ì§ì ‘ì ì¸ í¬ì›Œë”©ì´ ì¼ì–´ë‚œë‹¤.
- ê·¸ë ‡ê¸° ë•Œë¬¸ì— **ë¸Œë¼ìš°ì €ì˜ ì£¼ì†Œì°½ì—ì„œ URLì´ ë³€ê²½ë˜ì§€ ì•Šìœ¼ë©°**, í´ë¼ì´ì–¸íŠ¸ëŠ” í¬ì›Œë”©ì´ ë°œìƒí–ˆëŠ”ì§€ ì•Œ ìˆ˜ ì—†ë‹¤.

<img src = "./img/0603_04.png"><br>

```java
RequestDispatcher dis = request.gerRequestDisPatcher("í¬ì›Œë“œí•  ì„œë¸”ë¦¿ ë˜ëŠ” JSP")
dis.forward(request,response);
```

```java
@WebServlet("/ch08/src4")
public class SourceDispatch extends HttpServlet {
private static final long serialVersionUID = 1L;

protected void doGet(HttpServletRequest request, HttpServletResponse response)
	throws ServletException, IOException {
	String name = "í•œê¸€";
	name = URLEncoder.encode(name, "UTF-8");

	RequestDispatcher rd = request.getRequestDispatcher("/ch08/dst4?name="+name);
	rd.forward(request, response);
}
```

```java
@WebServlet("/ch08/dst4")
public class DestDispatch extends HttpServlet {
private static final long serialVersionUID = 1L;

protected void doGet(HttpServletRequest request, HttpServletResponse response)
		throws ServletException, IOException {
	response.setContentType("text/html; charset=utf-8");
	String name = request.getParameter("name");
	
	PrintWriter out = response.getWriter();
	out.print("<html><body style = \"margin : 50px\">");
	out.print("<h3>Dispatchë¥¼ ì´ìš©í•œ í™”ë©´ ì´ë™</h3>");
	out.print("ì´ë¦„ : " + name);
	out.print("</body></html>");
}
```

<br>
<br><br><br>