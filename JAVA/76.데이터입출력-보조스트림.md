# 18-2. ë°ì´í„° ì…ì¶œë ¥ - ë³´ì¡°ìŠ¤íŠ¸ë¦¼

> ë¬¸ìë³€í™˜ / ì„±ëŠ¥í–¥ìƒ / ê¸°ë³¸íƒ€ì… / í”„ë¦°íŠ¸ / ê°ì²´ - ì§ë ¬í™” `Serializable` `serialVersionUID`

<br>
<br>

- âœğŸ» **Recorded Date** : 2022ë…„ 11ì›” 15ì¼ ì˜¤í›„ 4:40
- ğŸ’¬ **Comment** : ë²Œì¨ ìˆ˜ì—…ì„ ë“¤ì€ ì§€ í•œ ë‹¬ì´ ë„˜ì—ˆë‹¤!<br>í•œ ë‹¬ì´ í˜¸ë¡œë¡ ì§€ë‚˜ê°”ëŠ”ë° ì‹œí—˜ë„ ë³´ê³ , ê³¼ì œë„ ì œì¶œí–ˆë‹¤.<br><img src = "./img/20221126_221335.jpg"><br>ì‹œí—˜ì€ ë¬´ì§€í•˜ê²Œ ì‰¬ì› ì§€ë§Œ, 100ì ì´ë¼ê³  ëœ¨ëŠ” ê±´ ë„ˆë¬´ ê¸°ë¶„ ì¢‹ìœ¼ë‹ˆê¹Œ ë°•ì œí•´ë†“ê¸°!<br>ë‚¨ì€ ìˆ˜ì—…ë„ ì§€ì¹˜ì§€ ë§ê³  ì¦ê¸°ëŠ” ê±¸ë¡œ!ğŸ˜Š
- ğŸ”– **Notion** : [IOStream,Writer,Reader](https://www.notion.so/18-1-IOStream-Writer-Reader-6ab182507ec744b1ac8b9e6ee82de115) / [ë°”ì´íŠ¸ìŠ¤íŠ¸ë¦¼/ë¬¸ììŠ¤íŠ¸ë¦¼](https://www.notion.so/18-2-14c7f62110824dabae8af7c7b80fbde8)

<br>
<br>
<br>

## ğŸ”¸ ë³´ì¡° ìŠ¤íŠ¸ë¦¼

- ë‹¤ë¥¸ ìŠ¤íŠ¸ë¦¼ê³¼ ì—°ê²½ë˜ì–´ ì—¬ëŸ¬ê°€ì§€ í¸ë¦¬í•œ ê¸°ëŠ¥ ì œê³µ
- ìì²´ì ìœ¼ë¡œ ì…ì¶œë ¥ ìˆ˜í–‰ ë¶ˆê°€ëŠ¥, ì§ì ‘ ìƒì„±ëœ ì…ì¶œë ¥ ìŠ¤íŠ¸ë¦¼ì— ì—°ê²°í•´ ì‚¬ìš©
    - `ë³´ì¡°ìŠ¤íŠ¸ë¦¼ ë³€ìˆ˜ = new ë³´ì¡°ìŠ¤íŠ¸ë¦¼(ì…ì¶œë ¥ìŠ¤íŠ¸ë¦¼);`
- ë˜ ë‹¤ë¥¸ ë³´ì¡° ìŠ¤íŠ¸ë¦¼ê³¼ ì—°ê²°ë˜ì–´ ìŠ¤íŠ¸ë¦¼ ì²´ì¸ìœ¼ë¡œ êµ¬ì„±í•  ìˆ˜ ìˆë‹¤.
    - `ë³´ì¡°ìŠ¤íŠ¸ë¦¼2 ë³€ìˆ˜ = new ë³´ì¡°ìŠ¤íŠ¸ë¦¼2(ë³´ì¡°ìŠ¤íŠ¸ë¦¼1);`
- **ìì£¼ ì‚¬ìš©ë˜ëŠ” ë³´ì¡° ìŠ¤íŠ¸ë¦¼**
    
    
    | ë³´ì¡° ìŠ¤íŠ¸ë¦¼ | ê¸°ëŠ¥ |
    | --- | --- |
    | InputStreamReader
    OutputStreamReader | ë°”ì´íŠ¸ ìŠ¤íŠ¸ë¦¼ â†’ ë¬¸ì ìŠ¤íŠ¸ë¦¼ ë³€í™˜ |
    | BufferedInputStream,<br>BufferedOutputStream,<br>BufferedReader,<br>BufferedWriter | ì…ì¶œë ¥ ì„±ëŠ¥ í–¥ìƒ |
    | DataInputStream, DataOutputStream | ê¸°ë³¸ íƒ€ì… ë°ì´í„° ì…ì¶œë ¥ |
    | PrintStream, PrintWriter | ì¤„ë°”ê¿ˆ ì²˜ë¦¬ ë° í˜•ì‹í™”ëœ ë¬¸ìì—´ ì¶œë ¥ |
    | ObjectInputStream, ObjectOutputStream | ê°ì²´ ì…ì¶œë ¥ |

<br><br>

## ğŸ”¸ In/OutputStreamReader : ë¬¸ì ë³€í™˜ ìŠ¤íŠ¸ë¦¼

- `InputStream`ë¥¼ `Reader`ë¡œ ë³€í™˜
    
    ```java
    InputStream is = new FileInputStream("C:/temp/test.txt");
    Reader reader = new InputStreamReader(is, "UTF-8");
    ```
    
- `OutputStream`ë¥¼ `Writer`ë¡œ ë³€í™˜
    
    ```java
    OutputStream os = new FileOutputStream("C:/temp/test.txt");
    Writer writer = new OutputStreamReader(os, "UTF-8");
    ```
    

<br><br>

## ğŸ”¸Bufferedâ€¦ : ì„±ëŠ¥ í–¥ìƒ ìŠ¤íŠ¸ë¦¼

- ë©”ëª¨ë¦¬ ë²„í¼ë¥¼ ì œê³µí•˜ì—¬ í”„ë¡œê·¸ë¨ì˜ ì‹¤í–‰ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¤ëŠ” ë³´ì¡° ìŠ¤íŠ¸ë¦¼

```java
BufferedInputStream bis = new BufferedInputStream(ë°”ì´íŠ¸ ì…ë ¥ ìŠ¤íŠ¸ë¦¼);
BufferedOutputStream bos = new BufferedOutputStream(ë°”ì´íŠ¸ ì¶œë ¥ ìŠ¤íŠ¸ë¦¼);

BufferedReader br = new BufferedReader(ë¬¸ì ì…ë ¥ ìŠ¤íŠ¸ë¦¼);
BufferedWriter bw = new BufferedWriter(ë¬¸ì ì¶œë ¥ ìŠ¤íŠ¸ë¦¼);

BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(System.out));
```

<br><br>

## ğŸ”¸DataIn/OutputStream : ê¸°ë³¸ íƒ€ì… ìŠ¤íŠ¸ë¦¼

```java
DataInputStream dis = new DataInputStream(ë°”ì´íŠ¸ ì…ë ¥ ìŠ¤íŠ¸ë¦¼);
DataOutputStream dis = new DataOutputStream(ë°”ì´íŠ¸ ì¶œë ¥ ìŠ¤íŠ¸ë¦¼);
```

<br><br>

## ğŸ”¸PrintStream/PrintWriter : í”„ë¦°íŠ¸ ìŠ¤íŠ¸ë¦¼

- `print()`, `println()`, `prinf()` ë©”ì†Œë“œë¥¼ ê°€ì§€ê³  ìˆëŠ” ë³´ì¡° ìŠ¤íŠ¸ë¦¼

```java
PrintStream ps = new PrintStream(ë°”ì´íŠ¸ ì¶œë ¥ ìŠ¤íŠ¸ë¦¼);
PrintWriter pw = new PrintWriter(ë¬¸ì ì¶œë ¥ ìŠ¤íŠ¸ë¦¼);
```

<br><br>

## ğŸ”¸ObjectIn/OutputStream : ê°ì²´ ìŠ¤íŠ¸ë¦¼

- ë©”ëª¨ë¦¬ì— ìƒì„±ëœ **ê°ì²´**ë¥¼ **íŒŒì¼ ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ë¡œ ì¶œë ¥**
    - ê°ì²´ë¥¼ ì¶œë ¥í•˜ë ¤ë©´ **ì§ë ¬í™”**(í•„ë“œê°’ì„ ì¼ë ¬ë¡œ ëŠ˜ì–´ì„  ë°”ì´íŠ¸ë¡œ ë³€ê²½)í•´ì•¼í•œë‹¤.
    - ê°ì²´ì˜ í•„ë“œê°’ìœ¼ë¡œ ë³µì›í•˜ëŠ” ê²ƒì„ **ì—­ì§ë ¬í™”**ë¼ í•œë‹¤.

```java
ObjectInputStream ois = new ObjectInputStream(ë°”ì´íŠ¸ ì…ë ¥ ìŠ¤íŠ¸ë¦¼);
ObjectOutputStream oos = new ObjectOutputStream(ë°”ì´íŠ¸ ì¶œë ¥ ìŠ¤íŠ¸ë¦¼);

// ì§ë ¬í™” í•˜ê¸° ìœ„í•´ .writeObject() ë©”ì†Œë“œ ì‚¬ìš©
oos.writeObject(ê°ì²´);

// ì—­ì§ë ¬í™” í•˜ê¸° ìœ„í•´ .readwriteObject() ë©”ì†Œë“œ ì‚¬ìš© (ê°•ì œíƒ€ì…ë³€í™˜ í•„ìš”)
ê°ì²´íƒ€ì… ë³€ìˆ˜ = (ê°ì²´íƒ€ì…) ois.readwriteObject();
```
<br>

### â—½ **ì§ë ¬í™” (serialization)**

- `Serializable` : ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ë§Œ ì§ë ¬í™”í•  ìˆ˜ ìˆë‹¤.
    - `static field`, `transient field`ë¡œ ì„ ì–¸ëœ í•„ë“œ ì œì™¸
- `serialVersionUID`
    - ì´í´ë¦½ìŠ¤ì—ì„œ ìë™ ìƒì„±í•  ìˆ˜ ìˆë‹¤.
    - **ì§ë ¬í™” â†’ ì—­ì§ë ¬í™” ì‹œ ê¸°ë³¸ì ìœ¼ë¡œ ë™ì¼í•œ í´ë˜ìŠ¤**ì—¬ì•¼ í•œë‹¤.
        - ê°€ë ¹ í•„ë“œê°€ ì¶”ê°€ ë˜ì—ˆë‹¤ë©´, ì§ë ¬í™”ëœ **í•„ë“œë¥¼ ê³µí†µìœ¼ë¡œ í¬í•¨**í•˜ê³ , **ë™ì¼í•œ** `serialVersionUID` ê°’ì„ ê°€ì§€ê³  ìˆë‹¤ë©´ ì—­ì§ë ¬í™” ê°€ëŠ¥í•˜ë‹¤.

<br>

1. [ì§ë ¬í™” ì˜ˆì‹œ ì½”ë“œ](https://github.com/6suk/JavaLecture/tree/master/src/ch18_IOStream/object) - Main

```java
// OutputStream ë³´ì¡° ìŠ¤íŠ¸ë¦¼ ì—°ê²°
		FileOutputStream fos = new FileOutputStream("c:/temp/object.dat");
		ObjectOutputStream oos = new ObjectOutputStream(fos);
		int[] arr1 = {1,2,3};
		
		// ê°ì²´ ìƒì„±
		Member m1 = new Member("fall", "ë‹¨í’ì´");
		Product p1 = new Product("ë…¸íŠ¸ë¶", 1500000);
		
		//ê°ì²´ë¥¼ ì§ë ¬í™”í•´ì„œ íŒŒì¼ì— ì €ì¥
		oos.writeObject(m1);
		oos.writeObject(p1);
		oos.writeObject(arr1);
		
		oos.flush(); oos.close(); fos.close();
		
		// InputStream ë³´ì¡° ìŠ¤íŠ¸ë¦¼ ì—°ê²°
		FileInputStream fis = new FileInputStream("c:/temp/object.dat");
		ObjectInputStream ois = new ObjectInputStream(fis);
		
		// íŒŒì¼ì„ ì½ê³  ì—­ì§ë ¬í™”í•´ì„œ ê°ì²´ë¡œ ë³µì›
		Member m2 = (Member) ois.readObject();
		Product p2 = (Product) ois.readObject();
		int[] arr2 = (int[]) ois.readObject();
		
		ois.close(); fis.close();
		
		//ë³µì›ëœ ê°ì²´ ë‚´ìš© í™•ì¸
		System.out.println(m2);
		System.out.println(p2);
		System.out.println(Arrays.toString(arr2));
```
<br>

2. Member Class

```java
public class Member implements Serializable{
	
	private static final long serialVersionUID = 7176644582798302939L;
	private String id;
	private String name;
	public Member(String id, String name) {
		super();
		this.id = id;
		this.name = name;
	}
	@Override
	public String toString() {
		return "Member [id=" + id + ", name=" + name + "]";
	}
	
}
```
<br>

3. Product Class

```java
public class Product implements Serializable{
	private static final long serialVersionUID = -286722804652779033L;
	private String name;
	private int price;
	
	public Product(String name, int price) {
		super();
		this.name = name;
		this.price = price;
	}
	@Override
	public String toString() {
		return "Product [name=" + name + ", price=" + price + "]";
	}
	
}
```
<br><br><br><br>